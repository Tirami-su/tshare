<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src='https://cdn.bootcss.com/socket.io/2.0.3/socket.io.js'></script>
	<script>
		// 如果服务端不在本机，请把127.0.0.1改成服务端ip
		var socket = io('http://www.haoye.com:3120');
		// 当连接服务端成功时触发connect默认事件
		socket.on('connect', function(){
		    socket.emit('login', '160400423');

		});

		socket.on('new_msg', function(msg){
			var msg = JSON.parse(msg);
			var from = document.getElementById('from');
			var content = document.getElementById('content');
			var time = document.getElementById('time');

			if(msg.from == null || msg.from == "") {
				from.innerHTML = 'system';
			} else {
				from.innerHTML = msg.from;
			}
			
			content.innerHTML = msg.content;
			time.innerHTML = msg.time;
		});
	</script>
</head>
<body>
	<li id='from'></li>
	<li id='to'>160400423</li>
	<li id='content'></li>
	<li id='time'></li>
</body>
</html>